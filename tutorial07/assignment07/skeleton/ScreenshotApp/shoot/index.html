<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Screenshot Service</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<header><span>Screenshot Service</span></header>

<div id="container">
  <form id="urlForm">
    <input id="urlInput" type="text" name="url" placeholder="Enter URL of a website to take screenshot" />
    <button id="go" type="submit" onclick="urlRequest()">Go!</button>
  </form>
</div>
<button id="go" type="submit" onclick="urlRequest()">Go!</button>

<div>
  <img id="result" src=""></img>
</div>


<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script>
  function testButton() {
    print("!!!!!!!!!!!!!!");
  }




  function urlRequest() {
  var text={"name":"张三","age":40}; //这是一个json对象
    var xmlhttp;
  if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
  } else { // code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      console.log('服务器响应成功');
      document.getElementById("result").src=xmlhttp.responseText[1].path;
      console.log(xmlhttp.responseText);
    }
  }
  url = "http://127.0.0.1:3000/";
  tail = "shoot/screenshots/create"
  xmlhttp.open("POST", url+tail, true);
  console.log(url);
  console.log(url+tail);
  xmlhttp.setRequestHeader("Content-type","application/json");//需要设置成application/json
  xmlhttp.send(JSON.stringify(text)); //body-parser解析的是字符串，所以需要把json对象转换成字符串
  
  console.log(JSON.stringify(text));
  console.log(typeof JSON.stringify(text));
}
  //   console.log('服务器响应成功');
  //   var text={"name":"张三","age":40}; //这是一个json对象
  //   var xmlhttp;
  //   if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
  //     xmlhttp = new XMLHttpRequest();
  //   } else { // code for IE6, IE5
  //     xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  //   }
  //   xmlhttp.onreadystatechange = function () {
  //     if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
  //       console.log('服务器响应成功');
  //       docuemnt.getElementById("result").src = xmlhttp.responseText;
  //       console.log(xmlhttp.responseText);
  //     }
  //   }
  //   // inputUrl = document.getElementById("urlForm").element[1].value;
  //   console.log("!!");
  //   url = "http://127.0.0.1:3000/";
  //   tail = "shoot/screenshots/create"
  //   xmlhttp.open("POST", url + tail, true);
  //   //xmlhttp.open("POST", "http://localhost:3000/shoot/screenshots/create", true);
  //   xmlhttp.setRequestHeader("Content-type", "application/json");//需要设置成application/json
  //   // xmlhttp.send(inputUrl); //body-parser解析的是字符串，所以需要把json对象转换成字符串
  //   xmlhttp.send(JSON.stringify(text));
  //   // console.log(JSON.stringify(text));
  //   // console.log(typeof JSON.stringify(text));
  // }

  // function test() {

  //   function testButton() {
  //     print("!!!!!!!!!!!!!!");
  //   }
  //   /**
  //    * generates an element that displays a CSS loading animation
  //    *
  //    * @return {jQuery|HTMLElement} can be appended anywhere in the DOM.
  //    */
  //   function makeCSSLoader() {
  //     var loaderEl = $('<div class="cssload-container">');
  //     var wheelEl = $('<div class="cssload-speeding-wheel">');
  //     loaderEl.append(wheelEl);
  //     return loaderEl;
  //   }

  //   // ******************************************************
  //   // ***
  //   // TODO: insert your code here to generate the screenshot.
  //   // how? make an Ajax POST request to 'screenshots/create?url={insert-url-here}'
  //   // show a loading animation while the request is loading
  //   // ***
  //   // ******************************************************

  //   function urlRequest() {
  //     console.log('服务器响应成功');
  //     //var text={"name":"张三","age":40}; //这是一个json对象
  //     var xmlhttp;
  //     if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
  //       xmlhttp = new XMLHttpRequest();
  //     } else { // code for IE6, IE5
  //       xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  //     }
  //     xmlhttp.onreadystatechange = function () {
  //       if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
  //         console.log('服务器响应成功');
  //         docuemnt.getElementById("result").src = xmlhttp.responseText;
  //         console.log(xmlhttp.responseText);
  //       }
  //     }
  //     // inputUrl = document.getElementById("urlForm").element[1].value;
  //     console.log("!!");
  //     xmlhttp.open("POST", "http://localhost:3000/shoot/screenshots/create", true);
  //     xmlhttp.setRequestHeader("Content-type", "application/json");//需要设置成application/json
  //     // xmlhttp.send(inputUrl); //body-parser解析的是字符串，所以需要把json对象转换成字符串

  //     // console.log(JSON.stringify(text));
  //     // console.log(typeof JSON.stringify(text));

  
    


  
 // test();


</script>
<link rel="stylesheet" href="http://www.medien.ifi.lmu.de/lehre/ws1617/mmn/uebung/material/assignments.css">
<link rel="stylesheet" href="shootstyle.css">
<link rel="stylesheet" href="cssloader.css">

</html>